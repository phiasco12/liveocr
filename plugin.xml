<?xml version="1.0" encoding="utf-8"?>
<plugin id="cordova-plugin-live-ocr" version="1.0.0" xmlns="http://apache.org/cordova/ns/plugins/1.0">

  <name>LiveOCR</name>

  <js-module name="LiveOCR" src="www/LiveOCR.js">
    <clobbers target="LiveOCR" />
  </js-module>

  <platform name="android">

    <!-- Register OCR Activity -->
    <config-file target="AndroidManifest.xml" parent="/manifest/application">
  <activity
    android:name="com.serial.liveocr.OCRActivity"
    android:exported="false"
    android:theme="@style/Theme.AppCompat.Light.NoActionBar"
    android:screenOrientation="portrait"/>
</config-file>


    <!-- âœ… FIXED: Proper Cordova Plugin Registration (DO NOT CHANGE ANYTHING ELSE) -->
    <config-file target="AndroidManifest.xml" parent="/manifest/application">
      <meta-data android:name="LiveOCR" android:value="com.serial.liveocr.LiveOCR" />
    </config-file>

    <!-- Camera permission -->
    <config-file target="AndroidManifest.xml" parent="/manifest">
      <uses-permission android:name="android.permission.CAMERA" />
    </config-file>

    <!-- Gradle deps -->
    <framework src="androidx.appcompat:appcompat:1.7.0" />
    <framework src="androidx.activity:activity:1.9.2" />
    <framework src="androidx.lifecycle:lifecycle-runtime:2.8.6" />
    <framework src="androidx.camera:camera-core:1.3.4" />
    <framework src="androidx.camera:camera-camera2:1.3.4" />
    <framework src="androidx.camera:camera-lifecycle:1.3.4" />
    <framework src="androidx.camera:camera-view:1.3.4" />
    <framework src="com.google.mlkit:text-recognition:16.0.0" />

    <!-- Sources -->
    <source-file src="src/android/LiveOCR.java" target-dir="app/src/main/java/com/serial/liveocr" />
    <source-file src="src/android/OCRActivity.java" target-dir="app/src/main/java/com/serial/liveocr" />

  </platform>
</plugin>
