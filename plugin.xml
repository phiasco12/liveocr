<?xml version="1.0" encoding="utf-8"?>
<plugin id="cordova-plugin-live-ocr" version="1.0.0"
        xmlns="http://apache.org/cordova/ns/plugins/1.0">

  <name>LiveOCR</name>

  <js-module name="LiveOCR" src="www/LiveOCR.js">
    <clobbers target="LiveOCR" />
  </js-module>

  <platform name="android">

    <!-- expose plugin -->
    <config-file target="res/xml/config.xml" parent="/*">
      <feature name="LiveOCR">
        <param name="android-package" value="com.serial.liveocr.LiveOCR"/>
      </feature>
    </config-file>

    <!-- Activity -->
    <config-file target="AndroidManifest.xml" parent="/manifest/application">
      <activity
        android:name="com.serial.liveocr.OCRActivity"
        android:exported="false"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
        android:screenOrientation="portrait"/>
    </config-file>

    <!-- permissions -->
    <config-file target="AndroidManifest.xml" parent="/manifest">
      <uses-permission android:name="android.permission.CAMERA"/>
      <uses-feature android:name="android.hardware.camera.any" android:required="false"/>
    </config-file>

    <!-- CameraX / AppCompat -->
    <framework src="androidx.appcompat:appcompat:1.7.0" />
    <framework src="androidx.core:core-ktx:1.13.1" />
    <framework src="androidx.camera:camera-core:1.3.4" />
    <framework src="androidx.camera:camera-camera2:1.3.4" />
    <framework src="androidx.camera:camera-lifecycle:1.3.4" />
    <framework src="androidx.camera:camera-view:1.3.4" />

    <!-- ML Kit via Play Services (no native .so in your APK) -->
    <framework src="com.google.android.gms:play-services-mlkit-text-recognition:+" />

    <!-- Java sources -->
    <source-file src="src/android/LiveOCR.java" target-dir="app/src/main/java/com/serial/liveocr"/>
    <source-file src="src/android/OCRActivity.java" target-dir="app/src/main/java/com/serial/liveocr"/>

  </platform>
</plugin>
